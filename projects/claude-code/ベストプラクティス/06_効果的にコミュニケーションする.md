# 効果的にコミュニケーションする

## 概要

Claude Codeとの対話は、シニアエンジニアとの対話と同じように考えよう。コードベースについて質問したり、インタビュー形式で要件を深掘りしたり。効果的なコミュニケーションが、効果的な結果につながる。

---

## コードベースについて質問する

### シニアエンジニアに聞くように質問する

Claudeには、あなたがシニアエンジニアに聞くのと同じ質問ができる:

```
- ロギングはどう動いてる？
- 新しいAPIエンドポイントはどうやって作る？
- foo.rsの134行目の `async move { ... }` は何をしてる？
- CustomerOnboardingFlowImplはどんなエッジケースを処理してる？
- なぜこのコードは333行目で bar() ではなく foo() を呼んでるの？
```

### 質問の種類

#### アーキテクチャの理解

```
「このプロジェクトのディレクトリ構造を説明して。
各ディレクトリの役割は？」
```

#### 実装の詳細

```
「認証フローを追ってくれる？
ログインからトークン発行までの流れを説明して」
```

#### 設計判断の背景

```
「なぜここでReduxを使ってるの？
Context APIではダメだった理由は？」
```

#### コードの挙動

```
「この再帰関数の終了条件は何？
無限ループになる可能性は？」
```

---

## Claudeにインタビューさせる

### 大きな機能の場合

より大きな機能を作る場合、まずClaudeにインタビューをさせることで、見落としがちなポイントを洗い出せる。

```
質問: 「[簡単な説明]を作りたい。AskUserQuestionツールを使って
詳細にインタビューして。

技術的な実装、UI/UX、エッジケース、懸念点、トレードオフについて
質問して。明らかな質問はしないで、私が考えていなかった
難しい部分を掘り下げて。

すべてカバーするまでインタビューを続けて、
その後完全な仕様書をSPEC.mdに書いて」
```

### なぜインタビューが効果的か

1. **盲点の発見**: 自分では気づかなかった考慮点が見つかる
2. **要件の明確化**: 曖昧な部分が具体的になる
3. **実装前の問題発見**: コーディング後ではなく前に問題を発見できる

### インタビュー後のワークフロー

インタビューで仕様が固まったら、新しいセッションを開始して実装に集中:

```bash
# 新しいセッションで
claude --continue  # または新規セッション

「SPEC.mdの仕様に従って実装を開始して」
```

> 新しいセッションを開始することで、実装に完全に集中できるクリーンなコンテキストが得られる。

---

## 質問の仕方のコツ

### 具体的に聞く

**悪い例:**
```
「このコードどう思う？」
```

**良い例:**
```
「このコードのパフォーマンスは問題ない？
N+1クエリの可能性は？」
```

### コンテキストを含める

**悪い例:**
```
「バグがある」
```

**良い例:**
```
「ユーザー登録でメール確認後に500エラーが発生する。
再現手順: 1) 登録 2) メール確認リンクをクリック 3) エラー」
```

### 期待する回答の形式を示す

```
「このAPIの認証フローを説明して。
シーケンス図のマークダウン形式で」
```

---

## 対話のパターン

### 探索的対話

```
User: 「このプロジェクトの認証の仕組みを教えて」
Claude: [説明]
User: 「JWTトークンの有効期限はどこで設定されてる？」
Claude: [説明]
User: 「リフレッシュトークンの実装はある？」
Claude: [説明]
```

### 決定支援対話

```
User: 「状態管理にReduxとZustandのどちらを使うべき？」
Claude: [両方の特徴と推奨]
User: 「このプロジェクトの規模だとどちら？」
Claude: [具体的な推奨]
```

### 実装ガイド対話

```
User: 「新しいAPIエンドポイントの追加方法を教えて」
Claude: [ステップバイステップの説明]
User: 「認証が必要なエンドポイントの場合は？」
Claude: [追加説明]
```

---

## フィードバックループ

### 早めの軌道修正

Claudeの回答が期待と違う場合は、すぐにフィードバックする:

```
User: 「そうじゃなくて、クライアント側のバリデーションの話」
```

```
User: 「もっと詳しく。特にエラーハンドリングについて」
```

```
User: 「シンプルにして。フレームワークは使わないで」
```

### 確認を求める

重要な判断の前には確認を求める:

```
「この理解で合ってる？
- ユーザーはメール認証必須
- セッションは24時間で期限切れ
- リフレッシュトークンはなし

合ってたら実装を始めて」
```

---

## まとめ

> 「シニアエンジニアと話すように対話せよ」

Claude Codeとの効果的なコミュニケーションは、明確な質問、適切なコンテキスト、そしてインタラクティブな対話から生まれる。インタビュー機能を活用して要件を深掘りし、具体的な質問で必要な情報を引き出そう。
