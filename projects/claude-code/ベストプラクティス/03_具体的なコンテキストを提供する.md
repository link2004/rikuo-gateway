# 具体的なコンテキストを提供する

## 概要

より精密な指示は、より少ない修正で済む結果につながる。曖昧な依頼は曖昧な結果を生み、具体的な依頼は具体的な結果を生む。

---

## 具体性がもたらす効果

### Before と After

| 戦略 | 改善前 | 改善後 |
|------|--------|--------|
| **タスクのスコープを絞る** | 「foo.pyにテストを追加して」 | 「foo.pyにテストを書いて。ユーザーがログアウトしている場合のエッジケースをカバー。モックは避けて」 |
| **ソースを指定する** | 「なぜExecutionFactoryはこんな変なAPIなの？」 | 「ExecutionFactoryのgit履歴を調べて、APIがどのように変遷してきたかまとめて」 |
| **既存パターンを参照する** | 「カレンダーウィジェットを追加して」 | 「ホームページにある既存のウィジェットの実装を見て、パターンを理解して。HotDogWidget.phpが良い例。そのパターンに従って、月を選択して年を前後にページネーションできる新しいカレンダーウィジェットを実装して。コードベースで既に使われているもの以外のライブラリは使わずスクラッチで構築して」 |
| **症状を記述する** | 「ログインのバグを直して」 | 「セッションタイムアウト後にログインが失敗するとユーザーから報告があった。src/auth/のauthフローを調べて、特にトークンリフレッシュ周り。問題を再現する失敗テストを書いてから修正して」 |

---

## 良いプロンプトの構成要素

### 1. 何をするか（What）

具体的なゴールを明示する。

```
✗ 「コードを改善して」
✓ 「validateUserInput関数のエラーハンドリングを追加して」
```

### 2. どこで（Where）

対象となるファイルやモジュールを指定する。

```
✗ 「認証を修正して」
✓ 「src/services/auth/tokenRefresh.tsのリフレッシュロジックを修正して」
```

### 3. どのように（How）

期待する実装方法やパターンを示す。

```
✗ 「テストを書いて」
✓ 「既存のsrc/tests/のパターンに従って、Jest + Testing Libraryでテストを書いて」
```

### 4. なぜ（Why）

背景を共有することで、より適切な判断ができる。

```
✗ 「APIレスポンスを変更して」
✓ 「モバイルアプリのパフォーマンス向上のため、不要なフィールドを削除してレスポンスサイズを減らしたい」
```

---

## まとめ

> 「具体的な指示は具体的な結果を生む」

曖昧さを排除し、コンテキストを豊富に提供することで、Claudeはより正確で期待通りの結果を出せる。
