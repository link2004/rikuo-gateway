# 検証方法を提供する

## 概要

Claude Codeを使う上で、最も効果を発揮する単一のアドバイス。それは「Claudeが自分の作業を検証できる方法を与える」ということである。

テストを実行させる、スクリーンショットを比較させる、出力を検証させる。明確な成功基準がなければ、見た目は正しくても動かないコードを生成してしまう可能性がある。

---

## なぜ検証が重要なのか

### 自律的な品質保証

Claudeは指示されたタスクを実行する際、自分自身で結果を確認できると、劇的にパフォーマンスが向上する。これは人間のエンジニアが「書いたコードをテストする」のと同じ理由だ。

> 検証なしでは、Claudeは「それっぽいもの」を作ることはできても、「確実に動くもの」を作ることは難しい。

### フィードバックループの確立

検証を組み込むことで、以下のサイクルが回る：

1. **実装** → コードを書く
2. **検証** → テストを実行する
3. **修正** → 失敗した部分を直す
4. **再検証** → 再度テストを実行する

---

## 具体的な改善例

### 検証基準を提供する

| 改善前 | 改善後 |
|--------|--------|
| 「メールアドレスを検証する関数を実装して」 | 「validateEmail関数を書いて。テストケース: `test@example.com`はtrue、`invalid`はfalse、`@missing.com`はfalse。実装後にテストを実行して」 |

### UI変更を視覚的に検証する

| 改善前 | 改善後 |
|--------|--------|
| 「ダッシュボードをもっと良くして」 | 「[スクリーンショットを貼り付け] このデザインを実装して。結果のスクリーンショットを撮って元と比較し、差分をリストアップして修正して」 |

### 根本原因に対処する

| 改善前 | 改善後 |
|--------|--------|
| 「ビルドが失敗してる」 | 「このエラーでビルドが失敗してる: [エラーを貼り付け]。修正してビルドが成功することを確認して。エラーを抑制するんじゃなく、根本原因に対処して」 |

---

## 実践的なヒント

### 1. テストファイルを指定する

```
「src/utils/validation.ts に変更を加えたら、
対応する src/utils/validation.test.ts のテストを実行して
すべてパスすることを確認して」
```

### 2. ビルドコマンドを明示する

```
「変更を加えたら npm run build を実行して、
型エラーがないことを確認して」
```

### 3. 期待する出力を示す

```
「このAPIエンドポイントは以下のJSONを返すべき:
{
  "status": "success",
  "data": { ... }
}
実際にcurlで叩いて確認して」
```

---

## よくある落とし穴

### 「動いてるように見える」罠

検証基準を与えないと、Claudeは以下のような状態で完了と判断してしまうことがある：

- 構文エラーはないが、ロジックが間違っている
- 一見正しいが、エッジケースで失敗する
- 型は通るが、実行時にクラッシュする

### 対策

- **明示的なテストケース**を提供する
- **失敗時の挙動**も定義する
- **実行して確認**という指示を含める

---

## まとめ

> 「Claudeに検証手段を与えよ」

これが、Claude Codeを最大限に活用するための最も重要な原則である。テストの実行、スクリーンショットの比較、出力の検証—これらを指示に組み込むことで、Claudeは自律的に品質を担保しながら作業を進められるようになる。
